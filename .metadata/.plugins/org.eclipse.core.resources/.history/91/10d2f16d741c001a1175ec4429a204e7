<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1" import="com.cs336.pkg.*"%>
<!--Import some libraries that have classes that we need -->
<%@ page import="java.io.*,java.util.*,java.sql.*,java.text.*"%>
<%@ page import="javax.servlet.http.*,javax.servlet.*"%>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Sales</title>
</head>
<body>
	<form method="post" action="saleReport.jsp">			
		
		<table>
			<tr>
				<td>Month (format MM)</td>
				<td><input type="date" name="month" maxlength="2" required></td>
			</tr>
			<tr>
				<td>Year (format YYYY)</td>
				<td><input type="date" name="year" maxlength="4"
					required></td>
			</tr>
		</table>
		
		
		
		<br> <input type="submit" value="Search">
	</form>
	<br><br>
	
	
	<b>Find Flight Reservation by: </b>
	<form method="post" action="reservationCustomer.jsp">
		Customer's Name (First Last)<input type="text" name=userid>
	<input type="submit" value="Search">
	</form>
	
	<form method="post" action="reservationFlightNumber.jsp">
		Flight Number (Ex. 2221) <input type="text" name=FlightNumber>
	<input type="submit" value="Search">
	</form>
	<h3>Sales and Revenue</h3>

<div>
	<b>Get revenue summary of: </b>
	<form method="post" action="revenueFlight.jsp">
		A flight (Ex. 'UA2221') <input type="text" name=flight>
	<input type="submit" value="Calculate">
	</form>
	
<!-- 	<form method="post" action="../ManagerFunctionality/RevenueByCity.jsp">
		A destination city (Ex. 'Newark', 'Atlanta', 'Tokyo') <input type="text" name=city>
	<input type="submit" value="Calculate">
	</form> -->
	
	<form method="post" action="revenueCustomer.jsp">
		A customer (by username12) <input type="text" name=userid>
	<input type="submit" value="Calculate">
	</form>
	
	<form method = "post" action ="listFlights.jsp">
	<tr>
	<td>Pick the Airport</td>
	<td>
	<%
	ApplicationDB db = new ApplicationDB();	
	Connection con = db.getConnection();
	Statement st;
	ResultSet rs;
	%>
	<select name = "airport" size = 1>
	<% 
	
	st = con.createStatement();
	rs = st.executeQuery("SELECT Id FROM Airport");
	
	while (rs.next())
	{
		%>
		<option value = "<%= rs.getString(1) %>"> <%= rs.getString(1) %></option>
		<%
	}
	st.close();
	rs.close();
	%>
	</select>
	<input type="submit" value="Submit">
	</form>
	
	
	<tr>
	<% 
	
	st = con.createStatement();
	rs = st.executeQuery("SELECT COUNT(*),FlightNumber FROM Flight GROUP BY FlightNumber DESC");
	out.print("<table border='1'>");

	//make a row
	out.print("<tr>");

	out.print("<td>");
	out.print("Reservation Date");
	out.print("</td>");
	
	//make a column
	out.print("<td>");
	out.print("Fare");
	out.print("</td>");
	
	//make a column
	out.print("<td>");
	out.print("Booking Fee");
	out.print("</td>");
	
	
	out.print("<td>");
	out.println("Flight Number");
	out.println("</td>");
	
	out.println("<td>");
	out.print("# of tickets bought";
	while (rs.next())
	{
		out.println("<td>");
		out.println(rs.getString("FlightNumber") + "  " + rs.getInt(1));
		out.println("</td>");
	}
	out.print("</tr>");
	%>
	
</div>


	





<!-- <br><br>
<a href='../ManagerFunctionality/SearchMonthAndYear.jsp'>Obtain sales report for month.</a>
 (See how many tickets were sold for the month.) -->

<!-- Most revenue generating customers -->
<br><br>
<a href="revenueMostByCustomer.jsp">Most Revenue Generated By A customers?!</a>
(Customers that generated the most revenue)
<br><br>



<!-- Most active flights (most reservations) -->
<a href="../ManagerFunctionality/MostActiveFlight.jsp">What is the most active flight?</a>
(Flight with the most reservations)
<table>


	<tr>

	
	<td><a href="success.jsp">Go Back Home</a></td>

	</tr>
</table>
</body>
</html>
